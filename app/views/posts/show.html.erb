<div class="container pt-3">
  <%= image_tag @post.menuimg.url%>

  <div class="row">
    <div class="card-block">
      <h4 class="card-title"><%= @post.name %></h4>
      <%= @post.category %>
      <span class="font-weight-bold"><%= @post.feature %></span>
    </div>
  </div>
  <div id="map" style="max-width:100%;height:200px;"></div>
</div>

<%=render "chat"%>

<script>
  (function(){
    var X = "<%= @post.x %>";
    var Y = "<%= @post.y %>";
    var category = "<%= @post.category %>";
    var mapContainer = document.getElementById('map');
    var mapOptions = {
      center: new daum.maps.LatLng(X, Y),
      level: 3
    };

    var map = new daum.maps.Map(mapContainer, mapOptions);

    // 버튼 클릭에 따라 지도 이동 기능을 막거나 풀고 싶은 경우에는 map.setDraggable 함수를 사용합니다
    function setDraggable(draggable) {
        // 마우스 드래그로 지도 이동 가능여부를 설정합니다
        map.setDraggable(draggable);
    }

    var imageSrc, markerImage, markerPosition;
    var imageOption = {offset: new daum.maps.Point(27, 69)}; // 마커이미지의 옵션입니다. 마커의 좌표와 일치시킬 이미지 안에서의 좌표를 설정합니다.
    //건국대학교
    if (category == "주변"){
      imageSrc = '<%= asset_path "near.png" %>'; // 마커이미지의 주소입니다
      imageSize = new daum.maps.Size(62, 65); // 마커이미지의 크기입니다
    }
    //컴공주점
    else if (category == "낮부스"){
        imageSrc = '<%= asset_path "lunch.png" %>'; // 마커이미지의 주소입니다
        imageSize = new daum.maps.Size(46, 69); // 마커이미지의 크기입니다
    }
    //응통주점
    else if (category == "밤주점"){
        imageSrc = '<%= asset_path "dinner.png" %>'; // 마커이미지의 주소입니다
        imageSize = new daum.maps.Size(70, 69); // 마커이미지의 크기입니다
    }
    // 마커의 이미지정보를 가지고 있는 마커이미지를 생성합니다
    markerImage = new daum.maps.MarkerImage(imageSrc, imageSize, imageOption);
    markerPosition  = new daum.maps.LatLng(X, Y);

    var marker = new daum.maps.Marker({
      position: markerPosition,
      image: markerImage
    });
    marker.setMap(map);
  }());

</script>
